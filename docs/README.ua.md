**Читати іншими мовами: [Русский](../README.md), [English](./README.en.md).**

## Життєвий цикл компонентів. HTTP-запити.

_У цьому розділі курсу я навчуся працювати із зовнішніми API для пошуку
зображень, а також практикуватимуся у роботі зі станом, сповіщеннями та
модальними вікнами в React. У рамках завдання я створю додаток для пошуку
зображень із пагінацією, де користувачі зможуть знаходити зображення за
ключовими словами, завантажувати більше зображень натисканням кнопки та
відкривати їх у повному розмірі._

---

<details>
<summary>Попередній перегляд програми для пошуку зображень</summary>

![Попередній перегляд програми для пошуку зображень](./mockup/preview.jpg)

</details>

---

#### Додаток включатиме наступні функції та компоненти:

1. **Основна структура програми та API-запити**: Я створю кореневий компонент
   `<App>`, який керуватиме станом і здійснюватиме запити до API для отримання
   зображень. Додаток працюватиме з API [Pixabay](https://pixabay.com/api/docs/)
   та надсилатиме запити під час кожного нового пошуку, отримуючи зображення на
   основі ключового слова, введеного користувачем. Я створю початковий стан із
   полями `images` для зберігання списку зображень, `query` для пошукового
   запиту та `page` для відстеження поточної сторінки пагінації.

```ts
// Початковий стан у <App>
state = {
  images: [],
  query: '',
  page: 1,
};
```

<details>
<summary><b><em>Інструкція для роботи з Pixabay API</b></em></summary><br>

```ts
// URL для HTTP-запиту
https://pixabay.com/api/?q=cat&page=1&key=your_key&image_type=photo&orientation=horizontal&per_page=12
```

Pixabay API підтримує пагінацію, за замовчуванням параметр `page` дорівнює `1`.
У відповідь приходить 12 об'єктів за один запит. Це налаштовується параметром
`per_page`. Під час пошуку нового ключового слова потрібно скидати значення
`page` до `1`.

У відповіді API приходить масив об'єктів, з яких будуть цікаві лише такі
властивості:

- `id` - унікальний ідентифікатор
- `webformatURL` - посилання на маленьке зображення для списку карток
- `largeImageURL` - посилання на велике зображення для модального вікна

</details>
<br>

2. **Компоненти для пошуку та відображення галереї**: Я створю кілька
   компонентів для розділення логіки:

   - `<SearchBar>` — компонент із формою для введення пошукового запиту. Він
     прийматиме пропс `onSubmit` – функцію для передачі значення інпуту під час
     відправлення форми. Після відправлення форми він оновлюватиме стан `query`
     у кореневому компоненті.
   - `<ImageGallery>` — компонент для відображення галереї зображень. Він
     отримуватиме дані через пропси та відображатиме список карток для кожного
     зображення.
   - `<ImageGalleryItem>` — компонент для кожного зображення в галереї, який
     рендеритиме прев'ю зображення з можливістю відкрити його у повному розмірі.

     <br>

3. **Реалізація кнопки "Завантажити більше**: Для підтримки пагінації я додам
   компонент `<LoadMoreButton>`, який з'являтиметься внизу галереї та
   завантажуватиме наступну сторінку зображень. Після натискання кнопки значення
   page у стані збільшиться, і додаток здійснить додатковий API-запит для
   отримання нових зображень. Кнопка рендеритиметься лише тоді, коли вже
   завантажено певні зображення. Якщо масив зображень порожній, кнопка не
   відображатиметься.

   <br>

4. **Сповіщення та обробка помилок**: Щоб інформувати користувача про помилки
   або відсутність результатів пошуку, я інтегрую `react-toastify`. Якщо пошук
   не дасть результатів або під час запиту виникне помилка, з'явиться відповідне
   сповіщення.

   <br>

5. **Відкриття зображення у модальному вікні**: Для відображення зображення у
   повному розмірі я додам компонент `<Modal>`, який відкриватиметься під час
   натискання на зображення в галереї. Модальне вікно закриватиметься при кліку
   поза межами зображення або натискання клавіші `Escape`. Компонент буде
   реалізований із використанням `createPortal` із бібліотеки `react-dom`. Для
   цього в `index.html` буде створено DOM-елемент із такою структурою:

```tsx
// Modal.tsx
const modalRoot = document.querySelector('#modal-root') as HTMLElement;
```

<br>

```html
<!-- index.html -->
<body>
  ...
  <div id="modal-root"></div>
</body>
```

6. **Оптимізація завантаження та управління станом**: Я додам компонент
   `<Loader>` для відображення індикатора завантаження під час отримання
   зображень, щоб покращити досвід користувача. Крім того, налаштую обробники
   для скидання станів `images` і `page` для нового пошукового запиту та
   збереження логіки управління станом у кореневому компоненті.
   <!-- ignore-prettier -->
   <br>

Під час створення додатку я вивчу роботу з асинхронними запитами, управління
станом, обробку помилок і сповіщення. Це допоможе мені краще зрозуміти взаємодію
між компонентами, організацію запитів у React-додатках, а також розширить мої
навички роботи з API, модальними вікнами та пагінацією.
